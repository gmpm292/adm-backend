enum WorkerType {
  PUBLICIST
  ECONOMIC
  SERVICE
  COURIER
  TECHNICIAN
  OPERATIVE
  COMMUNITY_MANAGER

  PRINCIPAL
  ADMINISTRATIVE
  MANAGER
  SUPERVISOR
  AGENT
  
  OTHER
}

type Worker implements SecurityBaseEntity {
  id: Int!
  createdAt: Date!
  updatedAt: Date!
  deletedAt: Date

  createdBy: User
  updatedBy: User
  deletedBy: User

  business: Business
  office: Office
  department: Department
  team: Team

  workerType: WorkerType!
  baseSalary: Float!
  customPaymentSettings: JSON
  user: User
  paymentRule: PaymentRule

  # Campos temporales
  tempFirstName: String
  tempLastName: String
  tempEmail: String
  tempPhone: String
  tempRole: [Role!]
}

type WorkersSummary {
  data: [Worker]!
  totalCount: Int!
}

input CreateWorkerInput {
  businessId: Int!
  officeId: Int
  departmentId: Int
  teamId: Int

  userId: Int
  workerType: WorkerType!
  paymentRuleId: Int
  baseSalary: Float
  customPaymentSettings: JSON

  # Campos temporales para creación de usuario
  tempFirstName: String
  tempLastName: String
  tempEmail: String
  tempPhone: String
  tempRole: [Role!]
}

input UpdateWorkerInput {
  businessId: Int
  officeId: Int
  departmentId: Int
  teamId: Int

  id: Int!
  userId: Int
  workerType: WorkerType
  paymentRuleId: Int
  baseSalary: Float
  customPaymentSettings: JSON

  # Campos temporales para actualización
  tempFirstName: String
  tempLastName: String
  tempEmail: String
  tempPhone: String
  tempRole: [Role!]
}

extend type Query {
  workers(options: ListOptions): WorkersSummary!
  worker(id: Int!): Worker
}

extend type Mutation {
  createWorker(createWorkerInput: CreateWorkerInput!): Worker!
  updateWorker(updateWorkerInput: UpdateWorkerInput!): Worker!
  removeWorkers(ids: [Int!]!): [Worker]!
  restoreWorkers(ids: [Int!]!): Int

  associateUserToWorker(workerId: Int!, userId: Int!): Worker!
  createUserFromWorker(workerId: Int!): Worker!
}

extend type Subscription {
  workerChanged: Boolean
}
